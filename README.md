# orchestration

###  下面的内容时我写完这个demo自己的理解：

服务编制的目的就是为了解耦微服务中各个服务依赖性的问题

### 1、服务编制的优缺点
##### 优点：
    (1)、可以解耦微服务中各个服务的依赖关系，每个服务都都可以单独的抽离出去，跨服务的调用都是在服务编制的这个服务中进行
    (2)、服务开发时，其它服务简洁化，增删改查实现一套就行。
##### 缺点：
    (1)、编制服务不好划分，不好拆分库

### 2、orchestration中的项目介绍
    orchestration：这相当于是一个文件夹
    
    ms-api：这是一个jar包，因为跨服务时，两个服务的实体类对象不能共用，所有提出来一个Info放在api中
    
    ms-base-common：这里面是一些用到的公共方法
    
    ms-center：这是Eureka注册中心
    
    ms-unit：这是单位服务
    
    ms-user：这是用户服务
    
    ms-user-unit：服务编制服务（公共服务）

### 3、orchestration这个demo的介绍

    这个demo主要为一个单位服务（ms-unit），一个用户服务（ms-user），一个服务编制服务（ms-user-unit），假设有三个页面，一个单位页面，一个用户页面，一个员工页面。
    ，员工新增时要从用户表中选择，员工一定是用户，但是用户不一定是员工
    
    （1）单位页面：
    新增：不需要跨服务，访问 ms-unit中的新增接口
    删除：需要跨服务，访问 ms-user-unit中的删除接口，先跨服务去单位服务删除该单位，再在公共服务中删除该单位下的所有员工
    修改：不需要跨服务，访问 ms-unit中的修改接口
    主键查询：需要跨服务，访问 ms-user-unit中的主键查询接口，先跨服务去单位服务中查询该单位的信息，再在公共服务中查询该单位有多少员工
    条件查询：需要跨服务，访问 ms-user-unit中的条件查询接口，先跨服务去单位服务中进行条件和分页的查询，再在公共服务中查询出每个单位有多少员工
    审核：需要跨服务，访问 ms-user-unit中的审核接口，先跨服务去单位服务中修改单位的审核字段，再在公共服务中修改公共表中的单位审核字段
    
    （2）用户页面：
    新增：不需要跨服务，访问 ms-user中的新增接口
    删除：需要跨服务，访问 ms-user-unit中的删除接口，先在公共表中查询该用户是否属于某个单位，如果是的话，则不能删除；否的话，跨服务到用户服务中删除
    修改：不需要跨服务，访问 ms-user中的修改接口
    主键查询：不需要跨服务，访问 ms-user中的主键查询接口
    条件查询：不需要跨服务，访问 ms-user中的条件查询接口
    审核：不需要跨服务，访问 ms-user中的审核接口
    
    （3）员工页面：（员工页面显示的数据都是从单位服务和用户服务中取的，没有实体）
    新增：访问 ms-user-unit中的新增接口，根据页面传的单位表主键和用户表主键查询出单位信息和用户信息，将需要的信息保存在公共表中
    删除：访问 ms-user-unit中的删除接口，删除公共表中该员工的数据即可
    修改（该员工换了一个分公司）：访问 ms-user-unit中的修改接口，根据页面传的单位主键去单位表中查询单位信息，修改公共表中单位的信息
    修改（该员工换一些基本信息）：访问 ms-user-unit中的修改接口，根据页面传的员工信息跨服务去人员服务中修改人员表中对应的信息
    主键查询：访问 ms-user-unit中的主键接口，分别去单位服务和人员服务中查询需要的信息
    条件查询：访问 ms-user中的条件查询接口，根据条件和分页在公共服务中查询后，再去单位服务和人员服务中匹配相应的数据